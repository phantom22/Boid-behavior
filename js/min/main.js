function f(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}function k(a){if(!(a instanceof Array)){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=c?c.call(a):{next:f(a)};for(var e=[];!(c=a.next()).done;)e.push(c.value);a=e}return a}function m(a,c){this.x=a;this.y=c}function n(a,c){return new m(a.x+c.x,a.y+c.y)}function p(a,c){return new m(Math.random()*(c-a)+a,Math.random()*(c-a)+a)}
var q=new m(0,0),r=new m(0,1),t=new m(0,-1),u=new m(1,0),v=new m(-1,0);Object.freeze(m);Object.freeze(q);Object.freeze(r);Object.freeze(t);Object.freeze(u);Object.freeze(v);function w(a){var c=document.querySelector("#canvas-output");c.width=800;c.height=800;c.style.width=800;c.style.height=800;this.canvas=c;this.i=this.canvas.getContext("2d");this.m=a;this.g=new m(800,800);this.l()}w.prototype.clear=function(){this.i.fillStyle="black";this.i.fillRect(0,0,this.g.x,this.g.y)};
w.prototype.l=function(){this.m(this);requestAnimationFrame(this.l.bind(this))};function x(){var a=this.j=y.g;this.h=new m(a.x/2,a.y/2);this.direction=p(1,-1)}x.prototype.move=function(){var a=n(this.h,new m(.64*this.direction.x,.64*this.direction.y));if(0>a.x||a.x>this.j.x||0>a.y||a.y>this.j.y){a=this.h;var c=this.j;this.h=new m(Math.max(q.x,Math.min(a.x,c.x)),Math.max(q.y,Math.min(a.y,c.y)));this.direction=p(1,-1)}else this.h=a};
for(var z=[],A=[],B=[],y=new w(function(a){var c=a.g.x/10,e=a.g.y/10;a.i.fillStyle="rgba(0, 0, 0, 0.02)";a.i.fillRect(0,0,a.g.x,a.g.y);A=[];B=[];var d=1/(a.g.x/c);e=1/(a.g.y/e);for(var b=0;b<z.length;b++){var g=z[b].h;z[b].move();var l=z[b].h,h=Math.floor(Math.floor(g.y*e)*c+Math.floor(g.x*d));"undefined"==typeof A[h]&&(A[h]=0);A[h]+=1;B[b]=h;if(g.x!=l.x||g.y!=l.y)h=a.i,h.strokeStyle="white",h.beginPath(),h.moveTo(g.x,g.y),h.lineTo(l.x,l.y),h.stroke()}for(a=0;a<z.length;a++){d=z[a].direction;e=180/
Math.PI*Math.atan2(d.x,d.y);b=0>d.x?360- -1*e:e;d=B[a];g=[d+c+1,d+c,d+c-1,d-1,d-c-1,d-c,d-c+1,d+1];e=d=void 0;292.5<b&&337.5>=b?(d=7,e=[g[7]].concat(k(g.slice(0,2)))):337.5<b||22.5>=b?(d=0,e=g.slice(0,3)):22.5<b&&67.5>=b?(d=1,e=g.slice(1,4)):67.5<b&&112.5>=b?(d=2,e=g.slice(2,5)):112.5<b&&157.5>=b?(d=3,e=g.slice(3,6)):157.5<b&&202.5>=b?(d=4,e=g.slice(4,7)):202.5<b&&247.5>=b?(d=5,e=g.slice(5)):247.5<b&&292.5>=b&&(d=6,e=[].concat(k(g.slice(6)),[g[0]]));g=0;b=-5;for(l=-1;l<e.length;l++)h=A[e[l]],"number"==
typeof h&&h>g&&(g=h,b=d+l);b=-1==b?7:b;b=7<b?b-8:b;if(-5!=b&&d!=b){e=void 0;switch(b){case 0:e=new m(0,7);break;case 1:e=new m(-7,0);break;case 2:e=new m(-7,0);break;case 3:e=new m(0,-7);break;case 4:e=new m(0,-7);break;case 5:e=new m(-7,0);break;case 6:e=new m(7,0);break;case 7:e=new m(0,7)}d=b>d?-.016:.016;b=p(0,1.5);d=new m(b.x*d,b.y*d);z[a].direction=n(z[a].direction,new m(e.x*d.x,e.y*d.y))}}}),C=0;2E3>C;C++)z.push(new x);