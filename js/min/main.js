function k(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function l(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:k(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function m(a,b){this.x=a;this.y=b}function n(a,b){return new m(a.x+b.x,a.y+b.y)}function p(a,b,c){return new m(Math.max(b.x,Math.min(a.x,c.x)),Math.max(b.y,Math.min(a.y,c.y)))}
var q=new m(0,0),r=new m(0,1),t=new m(0,-1),u=new m(1,0),v=new m(-1,0);Object.freeze(m);Object.freeze(q);Object.freeze(r);Object.freeze(t);Object.freeze(u);Object.freeze(v);function w(a){var b=document.querySelector("#canvas-output");b.width=1200;b.height=700;b.style.width=1200;b.style.height=700;this.canvas=b;this.i=this.canvas.getContext("2d");this.o=a;this.g=new m(1200,700);this.m()}w.prototype.clear=function(){this.i.fillStyle="black";this.i.fillRect(0,0,this.g.x,this.g.y)};
w.prototype.m=function(){this.o(this);requestAnimationFrame(this.m.bind(this))};function x(){var a=y.g;this.l=a;this.h=new m(a.x/2,0);this.angle=new m(0,1);this.j=["lightcoral","white","black"];this.color=this.j[Math.floor(8*Math.random())]}
x.prototype.move=function(){var a=n(this.h,new m(3.2*this.angle.x,3.2*this.angle.y));0>a.x||a.x>this.l.x||0>a.y||a.y>this.l.y?(this.h=p(this.h,q,this.l),this.angle=new m(2*Math.random()+-1,2*Math.random()+-1),a=this.j.indexOf(this.color),a=a+1===this.j.length?0:a+1,this.color=this.j[a]):this.h=a};
for(var z=[],A=[],B=[],y=new w(function(a){var b=a.g.x/5,c=a.g.y/5;a.i.fillStyle="rgba(0, 0, 0, 0.05)";a.i.fillRect(0,0,a.g.x,a.g.y);A=[];B=[];var e=1/(a.g.x/b);c=1/(a.g.y/c);for(var g=0;g<z.length;g++){var f=z[g].h;z[g].move();var d=z[g].h,h=Math.floor(Math.floor(f.y*c)*b+Math.floor(f.x*e));"undefined"==typeof A[h]&&(A[h]=0);A[h]+=1;B[g]=h;if(f.x!=d.x||f.y!=d.y)h=a.i,h.strokeStyle=z[g].color,h.beginPath(),h.moveTo(f.x,f.y),h.lineTo(d.x,d.y),h.stroke()}for(a=0;a<z.length;a++){f=B[a];g=c=e=void 0;
f=[2+f+2*b+2,2+f+2*b,2+f+2*b-2,2+f-2,2+f-2*b-2,2+f-2*b,2+f-2*b+2,2+f+2];d=z[a].angle;h=180/Math.PI*Math.atan2(d.x,d.y);d=0>d.x?360- -1*h:h;292.5<d&&337.5>=d?(g=0,c=[f[7]].concat(l(f.slice(0,2)))):337.5<d||22.5>=d?(g=1,c=f.slice(0,3)):22.5<d&&67.5>=d?(g=2,c=f.slice(1,4)):67.5<d&&112.5>=d?(g=3,c=f.slice(2,5)):112.5<d&&157.5>=d?(g=4,c=f.slice(3,6)):157.5<d&&202.5>=d?(g=5,c=f.slice(4,7)):202.5<d&&247.5>=d?(g=6,c=f.slice(5)):247.5<d&&292.5>=d&&(g=7,c=[].concat(l(f.slice(6)),[f[0]]));for(d=f=0;d<c.length;d++)h=
A[c[d]],"number"==typeof h&&h>f&&(f=h,e=g+d-1);e=-1===e?7:e;c=g;e=8===e?0:e;if("number"==typeof e&&c!=e){c=7===c+e?7===e?1:-1:e<c?1:-1;switch(e){case 0:e=[30,-12];break;case 1:e=[30,12];break;case 2:e=[12,30];break;case 3:e=[-12,30];break;case 4:e=[-30,12];break;case 5:e=[-30,-12];break;case 6:e=[-12,-30];break;case 7:e=[12,-30];break;default:e=[0,0]}e=new m(e[0]*c,e[1]*c);c=.016*Math.random();z[a].angle=n(z[a].angle,new m(e.x*c,e.y*c));z[a].angle=p(z[a].angle,new m(-1,-1),new m(1,1))}}}),C=0;2E3>
C;C++)z.push(new x);