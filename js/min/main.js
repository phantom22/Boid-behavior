function g(a,c){this.x=a;this.y=c}var n=new g(0,0),p=new g(0,1),q=new g(0,-1),t=new g(1,0),u=new g(-1,0);Object.freeze(g);Object.freeze(n);Object.freeze(p);Object.freeze(q);Object.freeze(t);Object.freeze(u);function w(a){var c=x,m=y,l=document.querySelector(c.query);l.width=c.g.x;l.height=c.g.y;l.style.width=c.g.x;l.style.height=c.g.y;this.canvas=l;this.l=this.canvas.getContext("2d");this.s=a;this.g=c.g;this.h=[];for(a=0;a<m.count;a++)this.h.push(new z(m));this.o()}
w.prototype.clear=function(){this.l.fillStyle="black";this.l.fillRect(0,0,this.g.x,this.g.y)};w.prototype.o=function(){this.s(this);requestAnimationFrame(this.o.bind(this))};function z(a){this.m=a.m;this.i=a.i;this.angle=a.angle;this.j=a.j;this.color=this.j[Math.floor(8*Math.random())]}
z.prototype.move=function(){var a=this.i;var c=new g(Math.cos(this.angle)*y.speed*.016,Math.sin(this.angle)*y.speed*.016);a=new g(a.x+c.x,a.y+c.y);0>a.x||a.x>this.m.x||0>a.y||a.y>this.m.y?(a=this.i,c=this.m,this.i=new g(Math.max(n.x,Math.min(a.x,c.x)),Math.max(n.y,Math.min(a.y,c.y))),this.angle=4*Math.random()*Math.PI-2*Math.PI,a=this.j.indexOf(this.color),a=a+1===this.j.length?0:a+1,this.color=this.j[a]):this.i=a};
var A=[],x={query:"#canvas-output",g:new g(1200,700)},y={count:2E3,m:x.g,i:new g(x.g.x/2,x.g.y/2),angle:1,speed:300,v:2,j:["lightcoral","white","red"],u:.05};
new w(function(a){a.A=[];var c=a.g.x/100,m=a.g.y/100;a.l.fillStyle="rgba(0, 0, 0, "+y.u+")";a.l.fillRect(0,0,a.g.x,a.g.y);var l=1/(a.g.x/c);m=1/(a.g.y/m);for(var k=0;k<a.h.length;k++){var r=a.h[k].i,b=Math.floor(Math.floor(r.y*m)*c+Math.floor(r.x*l));"undefined"==typeof A[b]&&(A[b]=0);A[b]+=1;var f=void 0,h=void 0,e=void 0,d=a.h[k].angle-Math.PI/2;b=[1+b+1*c+1,1+b+1*c,1+b+1*c-1,1+b-1,1+b-1*c-1,1+b-1*c,1+b-1*c+1,1+b+1];5.105<d&&5.89>=d?(e=0,h=[b[7],b[0],b[1]]):5.89<d||.392>=d?(e=1,h=[b[0],b[1],b[2]]):
.392<d&&1.178>=d?(e=2,h=[b[1],b[2],b[3]]):1.178<d&&1.963>=d?(e=3,h=[b[2],b[3],b[4]]):1.963<d&&2.748>=d?(e=4,h=[b[3],b[4],b[5]]):2.748<d&&3.534>=d?(e=5,h=[b[4],b[5],b[6]]):3.534<d&&4.319>=d?(e=6,h=[b[5],b[6],b[7]]):4.319<d&&5.105>=d&&(e=7,h=[b[6],b[7],b[0]]);for(b=d=0;3>b;b++){var v=A[h[b]];"number"==typeof v&&v>d&&(d=v,f=e+b-1)}f=-1===f?7:f;f=8===f?0:f;h=7===e+f?7===f?1:-1:f<e?1:-1;"number"==typeof f&&e!=f&&(a.h[k].angle+=y.v*h*.016*Math.random());a.h[k].move();f=a.h[k].i;e=a.l;e.strokeStyle=a.h[k].color;
e.beginPath();e.moveTo(r.x,r.y);e.lineTo(f.x,f.y);e.stroke()}});